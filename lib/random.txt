class _PageViewWidgetState extends State<PageViewWidget> {
  PageController _pageController;
  double viewPortFraction = 0.85;
  double pageOffset = 0;

  @override
  void initState() {
    _pageController =
        PageController(initialPage: 0, viewportFraction: viewPortFraction)
          ..addListener(() {
            setState(() {
              pageOffset = _pageController.page;
            });
          });
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return PageView.builder(
      allowImplicitScrolling: true,
      controller: _pageController,
      itemCount: context.watch<DataProvider>().popularMovies.length,
      itemBuilder: (context, index) {
        double scale = max(0.5 + viewPortFraction,
            (1 - (pageOffset - index).abs() + viewPortFraction));
        print(scale);
        return Container(
          padding: EdgeInsets.only(
            top: 100 - scale * 45,
            right: 10,
            left: 10,
          ),
          width: MediaQuery.of(context).size.width,
          child: ClipRRect(
            borderRadius: BorderRadius.circular(10),
            child: Image.network(
              'https://image.tmdb.org/t/p/w500/${context.watch<DataProvider>().popularMovies[index].backdropPath}',
              fit: BoxFit.cover,
            ),
          ),
        );
      },
    );
  }
}
